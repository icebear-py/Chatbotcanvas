from langchain_core.prompts import ChatPromptTemplate
from langchain_openai import ChatOpenAI
import os
from dotenv import load_dotenv

load_dotenv()

def extract_faqs_from_text(text: str):
    model = os.getenv("OPENROUTER_LLM_MODEL")
    faq_prompt = ChatPromptTemplate.from_messages([
        ("system", "You are an assistant that extracts FAQs from raw text and HTML text. The FAQs must be in JSON format with keys 'question' and 'answer'. Return only a valid JSON list of FAQs, other than that try retrieving some relevant faqs on your own like name of the website, products type, etc on your own."),
        ("user", "{text}")
    ])

    try:
        llm = ChatOpenAI(
            model=model,
            api_key=os.getenv("OPENROUTER_API_KEY"),
            base_url="https://openrouter.ai/api/v1"
        )
        prompt = faq_prompt.format_messages(text=text)
        llm_result = llm.invoke(prompt)
        print(llm_result.content)
        return llm_result.content

    except Exception as e:
        print(f"Error extracting FAQs: {str(e)}")
        return []

if __name__ == "__main__":
    txt = """Do I need to drop off at a particular time or make an appointment? No, drop in anytime during opening hours. You’re welcome to book a drop off through our website before you come in or just head in store.
How long does the drop off process take? We’ll need to evaluate the pieces you’ve brought in before you leave so please allow enough time for this.
What happens when I drop off? If it’s your first time consigning with us we’ll set you up with an account, otherwise simply sign in and select your consignment preferences. If you book online before you drop off you can skip this step. Finally we’ll evaluate the pieces you’ve prepared and decide what we can accept. We select and price items based on brand and market demand, quality of fabric and construction, and condition.
I’ve booked a drop off online, does this mean I can just drop my bag in store and go? Booking a drop off online means you won’t need to fill out the drop off form in store. This will speed up the process a lot but we will still need to evaluate your clothing before you go, this can take up to 30 minutes depending on how many pieces you’ve brought in.
Do I need to book a drop off online or can I just go in store like usual? You can definitely pop in store with your drop off as normal – booking online just speeds up the process once you get in store.
Do you accept non-authentic designer/luxury pieces? No we don’t. If you’re unsure you can use our authentication service for a fee.
How does your authentication service work? We partner with a trusted third-party service that combines expert industry knowledge with advanced AI technology to ensure the authenticity of your pieces. You can choose to use this service for pieces you don’t have certification for. If you choose not to use the authentication service and cannot provide certification, the item may be priced at a lower rate. You will be responsible for any costs incurred if the item is sold and later found to be non-authentic.We offer this service for a $25 fee per item.
How do you determine the prices? Our prices are the result of careful research and our industry experience. As a rough guide, pieces often sell for half to a third of the original retail price depending on their market value, demand and condition. While price changes cannot always be guaranteed, we are always happy to discuss our process if you have any enquiries.
Is there a minimum or maximum to drop off? No there’s no minimum or maximum to drop off, so feel free to bring in one piece or many.
What brands do you take? We specialize in timeless, investment pieces made to last, which means we do not accept fast fashion brands. As a general guideline, if the original retail price was under $100, it's unlikely we’ll be able to accept it.
Can I send you pictures of items I want to sell to get an idea of whether I should bring them in? Unfortunately not, it’s important for us to see the items in person to be able to properly assess the qualities we look for.
How long does it take for my pieces to be processed? You can find your estimated processing date as a notification on your account dashboard.
Why do I have to provide ID information? As part of NZ anti money laundering law we are required to collect ID from anyone who sells with us.
When do my pieces expire? Your items expire after 8 weeks. You can check the expiry date of your clothing by logging into your online account and checking the expiry date in the ‘items’ tab on your dashboard. If you opted to reclaim your unsold pieces when you dropped off you’ll have two weeks to collect these. After this they will become property of Encore to be repurposed.
Do you buy clothes on the spot? No, we sell clothes on your behalf. Your commission is based on the final selling price of your piece: • Under $350: 50% • $350 - $700: 60% • Over $700: 70%A 5% reduction applies if you opted to collect unsold items at the end of the consignment cycle.
Do you wash or clean the clothes? No, your clothes must be brought in freshly laundered or drycleaned, with no discernible odours, stains or damage.
Why don’t you accept certain items or brands? We focus on timeless, high-quality investment pieces that retain their value and can be resold over time, which excludes many lower-quality brands. Our selection is based on what we believe will sell well. If we are unable to accept certain items, please don’t take it personally. We have strict acceptance criteria and must carefully manage our stock to ensure a curated collection.
How do the commission rates work? Your commission is based on the final selling price of your pieces so the amount you earn may vary. Here’s how it works: • If your item sells for over $700, you'll earn 70% of the final price. • For items that sell between $350 and $700, you'll receive 60%. • For items under $350, the commission is 50%.If your item doesn’t sell at full price within the first four weeks, it will be marked down (25% off for two weeks, then 50% off for another two). If the price drops below the commission rate threshold during this time, your commission rate will adjust accordingly.Additionally, if you’ve chosen to collect any unsold items at the end of the consignment cycle, a 5% reduction applies to your commission.
How do I collect my balance? Balances $100 and under can be collected in-store via eftpos refund. For balances over $100 you can request a bank transfer through your online account. Log into your account and click on your profile (top right) and select request payout.
Why can’t you deposit my balance of (amount under $100)? Bank deposits are only available for amounts exceeding $100 or once all items have sold or completed their cycle in store.
Why hasn’t my balance been transferred yet? We process payouts once a week so you may have just missed the cutoff. Please allow up to 14 days.
Can I use the money in my account as store credit? Absolutely! The balance in your account works just like cash, so you can use it to shop in-store, online, or withdraw it if you prefer.
Will I be notified when my items expire? You can always track the progress of your items on your online account. If you opted to reclaim your unsold pieces we will notify you when these expire. You’ll have two weeks to collect these.
Where do my clothes go if I choose not to collect my unsold pieces? Clothing becomes property of Encore. We’ll decide how to repurpose them and may include donation or on-selling. Our main donation partner is The City Mission.
I decided I no longer want to sell my item, can I get it back? At any time during the 8 week cycle you are welcome to uplift consigned items. This will incur a $5 fee per item. Please contact the store so we can locate your items and we will notify you when they’re ready for collection.
How do I request a payout? Log into your account, navigate to My Account, click on Request Payout and enter your details. Or find the shortcut on your dashboard. This must be a bank account number, we cannot accept credit card details. If your account suffix only has two digits please add a '0' at the start
I’m having trouble signing into my account? Most issues are resolved by resetting your password. If you’re still having issues, contact us at ponsonby@encorestore.co.nz or 09 376 1667 and our staff can assist you.
Where do I log in? Find the login button at the top right of our website
My email address has changed how do I update this? Log in, navigate to My Account, click on ‘Email’ and update here.
Why am I seeing items I’m selling at Recycle Boutique? We share the same consignment system! This means you can track your consignments across any Recycle Boutique or Encore store.
(function() { var isLoaded = false; function asyncLoad() { if (isLoaded) return; isLoaded = true; var urls = ["https:\/\/chimpstatic.com\/mcjs-connected\/js\/users\/032aa9384a626b256c76f8a5f\/e66c542e0503d6bc8980768b2.js?shop=encore-designer.myshopify.com","https:\/\/cdn.hextom.com\/js\/freeshippingbar.js?shop=encore-designer.myshopify.com"]; for (var i = 0; i < urls.length; i++) { var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = urls[i]; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); } }; if(window.attachEvent) { window.attachEvent('onload', asyncLoad); } else { window.addEventListener('load', asyncLoad, false); } })(); var __st={"a":64379420811,"offset":43200,"reqid":"5a1186e2-6580-49d6-9a02-2f71f6d149ef-1755947634","pageurl":"encorestore.co.nz\/pages\/faqs","s":"pages-107484938379","u":"1bc041cd7e88","p":"page","rtyp":"page","rid":107484938379};
function portableWalletsHideBuyerConsent(e){var t=document.getElementById("shopify-buyer-consent"),n=document.getElementById("shopify-subscription-policy-button");t&&n&&(t.classList.add("hidden"),t.setAttribute("aria-hidden","true"),n.removeEventListener("click",e))}function portableWalletsShowBuyerConsent(e){var t=document.getElementById("shopify-buyer-consent"),n=document.getElementById("shopify-subscription-policy-button");t&&n&&(t.classList.remove("hidden"),t.removeAttribute("aria-hidden"),n.addEventListener("click",e))}window.Shopify?.PaymentButton&&(window.Shopify.PaymentButton.hideBuyerConsent=portableWalletsHideBuyerConsent,window.Shopify.PaymentButton.showBuyerConsent=portableWalletsShowBuyerConsent); document.addEventListener("DOMContentLoaded",(function(){function t(){return document.querySelector("shopify-accelerated-checkout-cart, shopify-accelerated-checkout")}if(t())Shopify.PaymentButton.init();else{new MutationObserver((function(e,n){t()&&(Shopify.PaymentButton.init(),n.disconnect())})).observe(document.body,{childList:!0,subtree:!0})}}));
(function e(e,d,r,n,o){if(void 0===o&&(o={}),!Boolean(null===(a=null===(i=window.Shopify)||void 0===i?void 0:i.analytics)||void 0===a?void 0:a.replayQueue)){var i,a;window.Shopify=window.Shopify||{};var t=window.Shopify;t.analytics=t.analytics||{};var s=t.analytics;s.replayQueue=[],s.publish=function(e,d,r){return s.replayQueue.push([e,d,r]),!0};try{self.performance.mark("wpm:start")}catch(e){}var l=function(){var e={modern:/Edge?\/(1{2}[4-9]|1[2-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Firefox\/(1{2}[4-9]|1[2-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Chrom(ium|e)\/(9{2}|\d{3,})\.\d+(\.\d+|)|(Maci|X1{2}).+ Version\/(15\.\d+|(1[6-9]|[2-9]\d|\d{3,})\.\d+)([,.]\d+|)( \(\w+\)|)( Mobile\/\w+|) Safari\/|Chrome.+OPR\/(9{2}|\d{3,})\.\d+\.\d+|(CPU[ +]OS|iPhone[ +]OS|CPU[ +]iPhone|CPU IPhone OS|CPU iPad OS)[ +]+(15[._]\d+|(1[6-9]|[2-9]\d|\d{3,})[._]\d+)([._]\d+|)|Android:?[ /-](13[3-9]|1[4-9]\d|[2-9]\d{2}|\d{4,})(\.\d+|)(\.\d+|)|Android.+Firefox\/(13[5-9]|1[4-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Android.+Chrom(ium|e)\/(13[3-9]|1[4-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|SamsungBrowser\/([2-9]\d|\d{3,})\.\d+/,legacy:/Edge?\/(1[6-9]|[2-9]\d|\d{3,})\.\d+(\.\d+|)|Firefox\/(5[4-9]|[6-9]\d|\d{3,})\.\d+(\.\d+|)|Chrom(ium|e)\/(5[1-9]|[6-9]\d|\d{3,})\.\d+(\.\d+|)([\d.]+$|.*Safari\/(?![\d.]+ Edge\/[\d.]+$))|(Maci|X1{2}).+ Version\/(10\.\d+|(1[1-9]|[2-9]\d|\d{3,})\.\d+)([,.]\d+|)( \(\w+\)|)( Mobile\/\w+|) Safari\/|Chrome.+OPR\/(3[89]|[4-9]\d|\d{3,})\.\d+\.\d+|(CPU[ +]OS|iPhone[ +]OS|CPU[ +]iPhone|CPU IPhone OS|CPU iPad OS)[ +]+(10[._]\d+|(1[1-9]|[2-9]\d|\d{3,})[._]\d+)([._]\d+|)|Android:?[ /-](13[3-9]|1[4-9]\d|[2-9]\d{2}|\d{4,})(\.\d+|)(\.\d+|)|Mobile Safari.+OPR\/([89]\d|\d{3,})\.\d+\.\d+|Android.+Firefox\/(13[5-9]|1[4-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Android.+Chrom(ium|e)\/(13[3-9]|1[4-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Android.+(UC? ?Browser|UCWEB|U3)[ /]?(15\.([5-9]|\d{2,})|(1[6-9]|[2-9]\d|\d{3,})\.\d+)\.\d+|SamsungBrowser\/(5\.\d+|([6-9]|\d{2,})\.\d+)|Android.+MQ{2}Browser\/(14(\.(9|\d{2,})|)|(1[5-9]|[2-9]\d|\d{3,})(\.\d+|))(\.\d+|)|K[Aa][Ii]OS\/(3\.\d+|([4-9]|\d{2,})\.\d+)(\.\d+|)/},d=e.modern,r=e.legacy,n=navigator.userAgent;return n.match(d)?"modern":n.match(r)?"legacy":"unknown"}(),u="modern"===l?"modern":"legacy",c=(null!=n?n:{modern:"",legacy:""})[u],f=function(e){return[e.baseUrl,"/wpm","/b",e.hashVersion,"modern"===e.buildTarget?"m":"l",".js"].join("")}({baseUrl:d,hashVersion:r,buildTarget:u}),m=function(e){var d=e.version,r=e.bundleTarget,n=e.surface,o=e.pageUrl,i=e.monorailEndpoint;return{emit:function(e){var a=e.status,t=e.errorMsg,s=(new Date).getTime(),l=JSON.stringify({metadata:{event_sent_at_ms:s},events:[{schema_id:"web_pixels_manager_load/3.1",payload:{version:d,bundle_target:r,page_url:o,status:a,surface:n,error_msg:t},metadata:{event_created_at_ms:s}}]});if(!i)return console&&console.warn&&console.warn("[Web Pixels Manager] No Monorail endpoint provided, skipping logging."),!1;try{return self.navigator.sendBeacon.bind(self.navigator)(i,l)}catch(e){}var u=new XMLHttpRequest;try{return u.open("POST",i,!0),u.setRequestHeader("Content-Type","text/plain"),u.send(l),!0}catch(e){return console&&console.warn&&console.warn("[Web Pixels Manager] Got an unhandled error while logging to Monorail."),!1}}}}({version:r,bundleTarget:l,surface:e.surface,pageUrl:self.location.href,monorailEndpoint:e.monorailEndpoint});try{o.browserTarget=l,function(e){var d=e.src,r=e.async,n=void 0===r||r,o=e.onload,i=e.onerror,a=e.sri,t=e.scriptDataAttributes,s=void 0===t?{}:t,l=document.createElement("script"),u=document.querySelector("head"),c=document.querySelector("body");if(l.async=n,l.src=d,a&&(l.integrity=a,l.crossOrigin="anonymous"),s)for(var f in s)if(Object.prototype.hasOwnProperty.call(s,f))try{l.dataset[f]=s[f]}catch(e){}if(o&&l.addEventListener("load",o),i&&l.addEventListener("error",i),u)u.appendChild(l);else{if(!c)throw new Error("Did not find a head or body element to append the script");c.appendChild(l)}}({src:f,async:!0,onload:function(){if(!function(){var e,d;return Boolean(null===(d=null===(e=window.Shopify)||void 0===e?void 0:e.analytics)||void 0===d?void 0:d.initialized)}()){var d=window.webPixelsManager.init(e)||void 0;if(d){var r=window.Shopify.analytics;r.replayQueue.forEach((function(e){var r=e[0],n=e[1],o=e[2];d.publishCustomEvent(r,n,o)})),r.replayQueue=[],r.publish=d.publishCustomEvent,r.visitor=d.visitor,r.initialized=!0}}},onerror:function(){return m.emit({status:"failed",errorMsg:"".concat(f," has failed to load")})},sri:function(e){var d=/^sha384-[A-Za-z0-9+/=]+$/;return"string"==typeof e&&d.test(e)}(c)?c:"",scriptDataAttributes:o}),m.emit({status:"loading"})}catch(e){m.emit({status:"failed",errorMsg:(null==e?void 0:e.message)||"Unknown error"})}}})({shopId: 64379420811,storefrontBaseUrl: "https://encorestore.co.nz",extensionsBaseUrl: "https://extensions.shopifycdn.com/cdn/shopifycloud/web-pixels-manager",monorailEndpoint: "https://monorail-edge.shopifysvc.com/unstable/produce_batch",surface: "storefront-renderer",enabledBetaFlags: ["ac843a20"],webPixelsConfigList: [{"id":"shopify-app-pixel","configuration":"{}","eventPayloadVersion":"v1","runtimeContext":"STRICT","scriptVersion":"0450","apiClientId":"shopify-pixel","type":"APP","privacyPurposes":["ANALYTICS","MARKETING"]},{"id":"shopify-custom-pixel","eventPayloadVersion":"v1","runtimeContext":"LAX","scriptVersion":"0450","apiClientId":"shopify-pixel","type":"CUSTOM","privacyPurposes":["ANALYTICS","MARKETING"]}],isMerchantRequest: false,initData: {"shop":{"name":"Encore Store","paymentSettings":{"currencyCode":"NZD"},"myshopifyDomain":"encore-designer.myshopify.com","countryCode":"NZ","storefrontUrl":"https:\/\/encorestore.co.nz"},"customer":null,"cart":null,"checkout":null,"productVariants":[],"purchasingCompany":null},},"https://encorestore.co.nz/cdn","2181a11aw2fccb243p116ca46emacad63e2",{"modern":"","legacy":""},{"shopId":"64379420811","storefrontBaseUrl":"https:\/\/encorestore.co.nz","extensionBaseUrl":"https:\/\/extensions.shopifycdn.com\/cdn\/shopifycloud\/web-pixels-manager","surface":"storefront-renderer","enabledBetaFlags":"[\"ac843a20\"]","isMerchantRequest":"false","hashVersion":"2181a11aw2fccb243p116ca46emacad63e2","publish":"custom","events":"[[\"page_viewed\",{}]]"}); window.ShopifyAnalytics = window.ShopifyAnalytics || {}; window.ShopifyAnalytics.meta = window.ShopifyAnalytics.meta || {}; window.ShopifyAnalytics.meta.currency = 'NZD'; var meta = {"page":{"pageType":"page","resourceType":"page","resourceId":107484938379}}; for (var attr in meta) { window.ShopifyAnalytics.meta[attr] = meta[attr]; }
"""  # your big HTML snippet here
    print(extract_faqs_from_text(txt))
